{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-bd8dc858\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"  城区和居民管理 > 城市地区管理\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"result-list\"\n};\nconst _hoisted_3 = {\n  class: \"district-box\"\n};\nconst _hoisted_4 = {\n  class: \"district-name\"\n};\nconst _hoisted_5 = {\n  class: \"chart-box\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_pie_chart = _resolveComponent(\"pie-chart\");\n  const _component_line_chart = _resolveComponent(\"line-chart\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_header, {\n    class: \"sub-header\",\n    onMousemove: $options.handleMouseMove\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onMousemove\"]), _createCommentVNode(\"LHM编写用于呈现区域犯罪信息与人口情况\"), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.cityName = $event),\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.search && $options.search(...args), [\"enter\"])),\n    placeholder: \"上海市\"\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.cityName]]), _createElementVNode(\"ul\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.results, result => {\n    return _openBlock(), _createElementBlock(\"li\", null, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString(result.districtName), 1 /* TEXT */), _createElementVNode(\"div\", null, \"人口:\" + _toDisplayString(result.population), 1 /* TEXT */), _createElementVNode(\"div\", null, \"犯罪数:\" + _toDisplayString(result.crimeNum), 1 /* TEXT */), _createElementVNode(\"div\", null, \"犯罪率:\" + _toDisplayString($options.crimeRate(result)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_pie_chart, {\n      data: $options.pieData(result)\n    }, null, 8 /* PROPS */, [\"data\"]), _createVNode(_component_line_chart, {\n      data: $options.lineData(result)\n    }, null, 8 /* PROPS */, [\"data\"])])]);\n  }), 256 /* UNKEYED_FRAGMENT */))])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","_createVNode","_component_el_header","onMousemove","$options","handleMouseMove","_hoisted_1","_createCommentVNode","type","$data","cityName","$event","onKeyup","_cache","_withKeys","args","search","placeholder","_hoisted_2","_createElementBlock","_Fragment","_renderList","results","result","_hoisted_3","_hoisted_4","_toDisplayString","districtName","population","crimeNum","crimeRate","_hoisted_5","_component_pie_chart","data","pieData","_component_line_chart","lineData"],"sources":["C:\\GitHubWarehouse\\2023-TJU-DBD-Police-Affair-System\\My-front\\dbproject\\src\\components\\UrbanResidentmanagement\\UrbanZoningManagement.vue"],"sourcesContent":["<template>\r\n   <el-header class=\"sub-header\" @mousemove=\"handleMouseMove\">\r\n    <div>&nbsp;&nbsp;城区和居民管理&nbsp;>&nbsp;城市地区管理</div>\r\n  </el-header>\r\n  \r\n<!--LHM编写用于呈现区域犯罪信息与人口情况-->\r\n\r\n  <div>\r\n    <input type=\"text\" v-model=\"cityName\"  @keyup.enter=\"search\" placeholder=\"上海市\"/>\r\n    <ul class=\"result-list\">\r\n    <li v-for=\"result in results\">\r\n      <div class=\"district-box\">\r\n        <div class=\"district-name\">{{ result.districtName }}</div>\r\n        <div>人口:{{ result.population }}</div>\r\n        <div>犯罪数:{{ result.crimeNum }}</div>\r\n        <div>犯罪率:{{ crimeRate(result) }}</div>\r\n      </div>\r\n      \r\n      <div class=\"chart-box\">\r\n        <pie-chart :data=\"pieData(result)\" />\r\n        <line-chart :data=\"lineData(result)\" />\r\n      </div>\r\n    </li>\r\n  </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cityName: '',\r\n      results: []\r\n    }\r\n  },\r\n  \r\n  components: {\r\n    PieChart,\r\n    LineChart\r\n  },\r\n\r\n  methods: {\r\n \r\n    handleMouseMove(event) {\r\n      const x = event.pageX - event.target.offsetLeft;\r\n      const y = event.pageY - event.target.offsetTop;\r\n\r\n      event.target.style.setProperty(\"--x\", `${x}px`);\r\n      event.target.style.setProperty(\"--y\", `${y}px`);\r\n    },\r\n \r\n    // 计算犯罪率\r\n    crimeRate(result) {\r\n      return result.crimeNum / result.population; \r\n    },\r\n    \r\n    // 生成饼图数据\r\n    pieData(result) {\r\n      return result.crimeTypeStatistic;\r\n    },\r\n    \r\n    // 生成折线图数据\r\n    lineData(result) {\r\n      return result.districtCrimeTimeStatistic; \r\n    },\r\n\r\n    search() {\r\n        // 这里可以发送搜索请求，使用 searchData 中的值来过滤数据\r\n        const token = localStorage.getItem(\"token\");\r\n  \r\n        // 设置Axios请求的headers，包括Authorization头部\r\n        const headers = {Authorization: `Bearer ${token}`};\r\n\r\n      axios.post('http://localhost:7078/CityCrimeInfo', this.cityName, {headers})\r\n      .then(res => {\r\n        this.results = res.data;\r\n      }) .catch(error => {\r\n          // 处理请求错误\r\n          console.error('请求错误:', error);        // 隐藏搜索结果区域\r\n          // 显示错误消息\r\n          alert('请求错误，请稍后重试');\r\n        });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.sub-header {\r\n    overflow: hidden;\r\n    display: flex;\r\n    position: absolute;\r\n    top: 70px;\r\n    left: 199px;\r\n    width: calc(100% - 199px);\r\n    height: 7vh;\r\n    min-height: 40px;\r\n    align-items: center; /* 文字竖直方向居中对齐 */\r\n    background-color: #1f2cdf;\r\n    box-shadow: inset -500px 0px 200px 0px rgba(4, 0, 113, 0.856);\r\n    color: #ffffff;\r\n    font-size: 28px;\r\n  }\r\n  .sub-header::before {\r\n    --size: 0;\r\n    content: '';\r\n    position: absolute;\r\n    left: var(--x);\r\n    top: var(--y);\r\n    width: var(--size);\r\n    height: var(--size);\r\n    background: radial-gradient(circle closest-side, #5a65ff, transparent);\r\n    transform: translate(-50%, -50%);\r\n    transition: width .2s ease, height .2s ease;\r\n  }\r\n  .sub-header:hover::before {\r\n    --size: 400px;\r\n  }\r\n</style>"],"mappings":";;gEAEIA,mBAAA,CAAiD,aAA5C,oBAAsC;;EAOvCC,KAAK,EAAC;AAAa;;EAEhBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAe;;EAMvBA,KAAK,EAAC;AAAW;;;;;6DAjBzBC,YAAA,CAEWC,oBAAA;IAFAF,KAAK,EAAC,YAAY;IAAEG,WAAS,EAAEC,QAAA,CAAAC;;sBACzC,MAAiD,CAAjDC,UAAiD,C;;sCAGrDC,mBAAA,wBAA2B,EAEzBR,mBAAA,CAiBM,c,gBAhBJA,mBAAA,CAAgF;IAAzES,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAC,QAAQ,GAAAC,MAAA;IAAIC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQX,QAAA,CAAAY,MAAA,IAAAZ,QAAA,CAAAY,MAAA,IAAAD,IAAA,CAAM;IAAEE,WAAW,EAAC;iEAA7CR,KAAA,CAAAC,QAAQ,E,GACpCX,mBAAA,CAcG,MAdHmB,UAcG,I,kBAbHC,mBAAA,CAYKC,SAAA,QAAAC,WAAA,CAZgBZ,KAAA,CAAAa,OAAO,EAAjBC,MAAM;yBAAjBJ,mBAAA,CAYK,aAXHpB,mBAAA,CAKM,OALNyB,UAKM,GAJJzB,mBAAA,CAA0D,OAA1D0B,UAA0D,EAAAC,gBAAA,CAA5BH,MAAM,CAACI,YAAY,kBACjD5B,mBAAA,CAAqC,aAAhC,KAAG,GAAA2B,gBAAA,CAAGH,MAAM,CAACK,UAAU,kBAC5B7B,mBAAA,CAAoC,aAA/B,MAAI,GAAA2B,gBAAA,CAAGH,MAAM,CAACM,QAAQ,kBAC3B9B,mBAAA,CAAsC,aAAjC,MAAI,GAAA2B,gBAAA,CAAGtB,QAAA,CAAA0B,SAAS,CAACP,MAAM,kB,GAG9BxB,mBAAA,CAGM,OAHNgC,UAGM,GAFJ9B,YAAA,CAAqC+B,oBAAA;MAAzBC,IAAI,EAAE7B,QAAA,CAAA8B,OAAO,CAACX,MAAM;uCAChCtB,YAAA,CAAuCkC,qBAAA;MAA1BF,IAAI,EAAE7B,QAAA,CAAAgC,QAAQ,CAACb,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}