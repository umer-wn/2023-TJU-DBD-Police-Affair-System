{"ast":null,"code":"import axios from 'axios';\nimport * as echarts from 'echarts'; //引入echarts\n\nexport default {\n  data() {\n    return {\n      cityName: '',\n      results: []\n    };\n  },\n  components: {\n    PieChart,\n    LineChart\n  },\n  methods: {\n    handleMouseMove(event) {\n      const x = event.pageX - event.target.offsetLeft;\n      const y = event.pageY - event.target.offsetTop;\n      event.target.style.setProperty(\"--x\", `${x}px`);\n      event.target.style.setProperty(\"--y\", `${y}px`);\n    },\n    // 计算犯罪率\n    crimeRate(result) {\n      return result.crimeNum / result.population;\n    },\n    // 生成饼图数据\n    pieData(result) {\n      return result.crimeTypeStatistic;\n    },\n    // 生成折线图数据\n    lineData(result) {\n      return result.districtCrimeTimeStatistic;\n    },\n    search() {\n      // 这里可以发送搜索请求，使用 searchData 中的值来过滤数据\n      const token = localStorage.getItem(\"token\");\n\n      // 设置Axios请求的headers，包括Authorization头部\n      const headers = {\n        Authorization: `Bearer ${token}`\n      };\n      axios.post('http://localhost:7078/CityCrimeInfo', this.cityName, {\n        headers\n      }).then(res => {\n        this.results = res.data;\n      }).catch(error => {\n        // 处理请求错误\n        console.error('请求错误:', error); // 隐藏搜索结果区域\n        // 显示错误消息\n        alert('请求错误，请稍后重试');\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","echarts","data","cityName","results","components","PieChart","LineChart","methods","handleMouseMove","event","x","pageX","target","offsetLeft","y","pageY","offsetTop","style","setProperty","crimeRate","result","crimeNum","population","pieData","crimeTypeStatistic","lineData","districtCrimeTimeStatistic","search","token","localStorage","getItem","headers","Authorization","post","then","res","catch","error","console","alert"],"sources":["C:\\GitHubWarehouse\\2023-TJU-DBD-Police-Affair-System\\My-front\\dbproject\\src\\components\\UrbanResidentmanagement\\UrbanZoningManagement.vue"],"sourcesContent":["<template>\r\n   <el-header class=\"sub-header\" @mousemove=\"handleMouseMove\">\r\n    <div>&nbsp;&nbsp;城区和居民管理&nbsp;>&nbsp;城市地区管理</div>\r\n  </el-header>\r\n  \r\n<!--LHM编写用于呈现区域犯罪信息与人口情况-->\r\n\r\n  <div>\r\n    <input type=\"text\" v-model=\"cityName\"  @keyup.enter=\"search\" placeholder=\"上海市\"/>\r\n    <ul class=\"result-list\">\r\n    <li v-for=\"result in results\">\r\n      <div class=\"district-box\">\r\n        <div class=\"district-name\">{{ result.districtName }}</div>\r\n        <div>人口:{{ result.population }}</div>\r\n        <div>犯罪数:{{ result.crimeNum }}</div>\r\n        <div>犯罪率:{{ crimeRate(result) }}</div>\r\n      </div>\r\n      \r\n      <div class=\"chart-box\">\r\n        <pie-chart :data=\"pieData(result)\" />\r\n        <line-chart :data=\"lineData(result)\" />\r\n      </div>\r\n    </li>\r\n  </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport * as echarts from 'echarts' //引入echarts\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cityName: '',\r\n      results: []\r\n    }\r\n  },\r\n  \r\n  components: {\r\n    PieChart,\r\n    LineChart\r\n  },\r\n\r\n  methods: {\r\n \r\n    handleMouseMove(event) {\r\n      const x = event.pageX - event.target.offsetLeft;\r\n      const y = event.pageY - event.target.offsetTop;\r\n\r\n      event.target.style.setProperty(\"--x\", `${x}px`);\r\n      event.target.style.setProperty(\"--y\", `${y}px`);\r\n    },\r\n \r\n    // 计算犯罪率\r\n    crimeRate(result) {\r\n      return result.crimeNum / result.population; \r\n    },\r\n    \r\n    // 生成饼图数据\r\n    pieData(result) {\r\n      return result.crimeTypeStatistic;\r\n    },\r\n    \r\n    // 生成折线图数据\r\n    lineData(result) {\r\n      return result.districtCrimeTimeStatistic; \r\n    },\r\n\r\n    search() {\r\n        // 这里可以发送搜索请求，使用 searchData 中的值来过滤数据\r\n        const token = localStorage.getItem(\"token\");\r\n  \r\n        // 设置Axios请求的headers，包括Authorization头部\r\n        const headers = {Authorization: `Bearer ${token}`};\r\n\r\n      axios.post('http://localhost:7078/CityCrimeInfo', this.cityName, {headers})\r\n      .then(res => {\r\n        this.results = res.data;\r\n      }) .catch(error => {\r\n          // 处理请求错误\r\n          console.error('请求错误:', error);        // 隐藏搜索结果区域\r\n          // 显示错误消息\r\n          alert('请求错误，请稍后重试');\r\n        });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.sub-header {\r\n    overflow: hidden;\r\n    display: flex;\r\n    position: absolute;\r\n    top: 70px;\r\n    left: 199px;\r\n    width: calc(100% - 199px);\r\n    height: 7vh;\r\n    min-height: 40px;\r\n    align-items: center; /* 文字竖直方向居中对齐 */\r\n    background-color: #1f2cdf;\r\n    box-shadow: inset -500px 0px 200px 0px rgba(4, 0, 113, 0.856);\r\n    color: #ffffff;\r\n    font-size: 28px;\r\n  }\r\n  .sub-header::before {\r\n    --size: 0;\r\n    content: '';\r\n    position: absolute;\r\n    left: var(--x);\r\n    top: var(--y);\r\n    width: var(--size);\r\n    height: var(--size);\r\n    background: radial-gradient(circle closest-side, #5a65ff, transparent);\r\n    transform: translate(-50%, -50%);\r\n    transition: width .2s ease, height .2s ease;\r\n  }\r\n  .sub-header:hover::before {\r\n    --size: 400px;\r\n  }\r\n</style>"],"mappings":"AA4BA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAO,KAAKC,OAAM,MAAO,SAAQ,EAAE;;AAGnC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EAEDC,UAAU,EAAE;IACVC,QAAQ;IACRC;EACF,CAAC;EAEDC,OAAO,EAAE;IAEPC,eAAeA,CAACC,KAAK,EAAE;MACrB,MAAMC,CAAA,GAAID,KAAK,CAACE,KAAI,GAAIF,KAAK,CAACG,MAAM,CAACC,UAAU;MAC/C,MAAMC,CAAA,GAAIL,KAAK,CAACM,KAAI,GAAIN,KAAK,CAACG,MAAM,CAACI,SAAS;MAE9CP,KAAK,CAACG,MAAM,CAACK,KAAK,CAACC,WAAW,CAAC,KAAK,EAAG,GAAER,CAAE,IAAG,CAAC;MAC/CD,KAAK,CAACG,MAAM,CAACK,KAAK,CAACC,WAAW,CAAC,KAAK,EAAG,GAAEJ,CAAE,IAAG,CAAC;IACjD,CAAC;IAED;IACAK,SAASA,CAACC,MAAM,EAAE;MAChB,OAAOA,MAAM,CAACC,QAAO,GAAID,MAAM,CAACE,UAAU;IAC5C,CAAC;IAED;IACAC,OAAOA,CAACH,MAAM,EAAE;MACd,OAAOA,MAAM,CAACI,kBAAkB;IAClC,CAAC;IAED;IACAC,QAAQA,CAACL,MAAM,EAAE;MACf,OAAOA,MAAM,CAACM,0BAA0B;IAC1C,CAAC;IAEDC,MAAMA,CAAA,EAAG;MACL;MACA,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;MAE3C;MACA,MAAMC,OAAM,GAAI;QAACC,aAAa,EAAG,UAASJ,KAAM;MAAC,CAAC;MAEpD7B,KAAK,CAACkC,IAAI,CAAC,qCAAqC,EAAE,IAAI,CAAC/B,QAAQ,EAAE;QAAC6B;MAAO,CAAC,EACzEG,IAAI,CAACC,GAAE,IAAK;QACX,IAAI,CAAChC,OAAM,GAAIgC,GAAG,CAAClC,IAAI;MACzB,CAAC,EAAGmC,KAAK,CAACC,KAAI,IAAK;QACf;QACAC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC,EAAS;QACtC;QACAE,KAAK,CAAC,YAAY,CAAC;MACrB,CAAC,CAAC;IACN;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}