{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-bd8dc858\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"  城区和居民管理 > 城市地区管理\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"main\"\n};\nconst _hoisted_3 = {\n  class: \"content\"\n};\nconst _hoisted_4 = {\n  class: \"result-list\"\n};\nconst _hoisted_5 = {\n  class: \"district-box\"\n};\nconst _hoisted_6 = {\n  class: \"district-name\"\n};\nconst _hoisted_7 = {\n  class: \"charts\"\n};\nconst _hoisted_8 = {\n  class: \"top-content\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \"案件类型统计饼图\", -1 /* HOISTED */));\nconst _hoisted_10 = [\"id\"];\nconst _hoisted_11 = {\n  class: \"top-content\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \"案件时间统计折线图\", -1 /* HOISTED */));\nconst _hoisted_13 = [\"id\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_header, {\n    class: \"sub-header\",\n    onMousemove: $options.handleMouseMove\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onMousemove\"]), _createCommentVNode(\"LHM编写用于呈现区域犯罪信息与人口情况\"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.CityName = $event),\n    placeholder: \"请输入全称如“上海市”\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.CityName]]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.fetchDistrictInfo\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"查询\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.distictResults, result => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: result.DistrictName\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString(result.districtName), 1 /* TEXT */), _createElementVNode(\"div\", null, \"人口:\" + _toDisplayString(result.population), 1 /* TEXT */), _createElementVNode(\"div\", null, \"犯罪数:\" + _toDisplayString(result.crimeNum), 1 /* TEXT */), _createElementVNode(\"div\", null, \"犯罪率:\" + _toDisplayString($options.crimeRate(result)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createCommentVNode(\" 使用v-for迭代distictResults列表，并为每个result调用drawStatusPieChart方法 \"), _createElementVNode(\"div\", {\n      id: 'typePieChart_' + result.DistrictName,\n      style: {\n        \"width\": \"400px\",\n        \"height\": \"400px\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_10)]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createCommentVNode(\" 使用v-for迭代distictResults列表，并为每个result调用drawStatusPieChart方法 \"), _createElementVNode(\"div\", {\n      id: 'timeLineChart_' + result.DistrictName,\n      style: {\n        \"width\": \"400px\",\n        \"height\": \"400px\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_13)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","style","_createVNode","_component_el_header","onMousemove","$options","handleMouseMove","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","type","$data","CityName","$event","placeholder","_component_el_button","onClick","fetchDistrictInfo","_hoisted_4","_createElementBlock","_Fragment","_renderList","distictResults","result","key","DistrictName","_hoisted_5","_hoisted_6","_toDisplayString","districtName","population","crimeNum","crimeRate","_hoisted_7","_hoisted_8","_hoisted_9","id","_hoisted_11","_hoisted_12"],"sources":["C:\\GitHubWarehouse\\2023-TJU-DBD-Police-Affair-System\\My-front\\dbproject\\src\\components\\UrbanResidentmanagement\\UrbanZoningManagement.vue"],"sourcesContent":["<template>\r\n   <el-header class=\"sub-header\" @mousemove=\"handleMouseMove\">\r\n    <div>&nbsp;&nbsp;城区和居民管理&nbsp;>&nbsp;城市地区管理</div>\r\n  </el-header>\r\n  \r\n<!--LHM编写用于呈现区域犯罪信息与人口情况-->\r\n\r\n<div class=\"main\">\r\n  <div class=\"content\">\r\n    <input type=\"text\" v-model=\"CityName\"   placeholder=\"请输入全称如“上海市”\"/>\r\n    <el-button type=\"primary\" @click=\"fetchDistrictInfo\">查询</el-button>\r\n\r\n    <ul class=\"result-list\">\r\n\r\n\r\n    <li v-for=\"result in distictResults\" :key=\"result.DistrictName\">\r\n      <div class=\"district-box\">\r\n        <div class=\"district-name\">{{ result.districtName }}</div>\r\n        <div>人口:{{ result.population }}</div>\r\n        <div>犯罪数:{{ result.crimeNum }}</div>\r\n        <div>犯罪率:{{ crimeRate(result) }}</div>\r\n      </div>\r\n      \r\n      <div class=\"charts\">\r\n      <div class=\"top-content\">\r\n        <h2 style=\"text-align: center\">案件类型统计饼图</h2>\r\n          <!-- 使用v-for迭代distictResults列表，并为每个result调用drawStatusPieChart方法 -->\r\n          <div :id=\"'typePieChart_' + result.DistrictName\" style=\" width: 400px; height: 400px;\"></div>       \r\n      </div> \r\n      <div class=\"top-content\">\r\n        <h2 style=\"text-align: center\">案件时间统计折线图</h2>\r\n          <!-- 使用v-for迭代distictResults列表，并为每个result调用drawStatusPieChart方法 -->\r\n          <div :id=\"'timeLineChart_' + result.DistrictName\" style=\" width: 400px; height: 400px;\"></div>       \r\n      </div> \r\n      </div>\r\n\r\n    </li>\r\n  </ul>\r\n\r\n\r\n\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport * as echarts from 'echarts';\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      CityName: '',\r\n      distictResults: [],\r\n      crimeTypeStatistics: [],\r\n    }\r\n  },\r\n  methods: { \r\n    handleMouseMove(event) {\r\n      const x = event.pageX - event.target.offsetLeft;\r\n      const y = event.pageY - event.target.offsetTop;\r\n      event.target.style.setProperty(\"--x\", `${x}px`);\r\n      event.target.style.setProperty(\"--y\", `${y}px`);\r\n    },\r\n \r\n    // 计算犯罪率\r\n    crimeRate(result) {\r\n      return result.crimeNum / result.population; \r\n    },\r\n    \r\n    drawTypePieChart() {\r\n      //对distictResults列表中的每个result进行遍历\r\n      this.distictResults.forEach(result => {\r\n        // 生成每个饼状图容器的唯一id\r\n        const chartId = 'typePieChart_' + result.DistrictName;\r\n        // 初始化echarts实例，并传入对应的id\r\n        const pieChart = echarts.init(document.getElementById(chartId));\r\n        \r\n        const option = {\r\n          tooltip: {\r\n            trigger: 'item'\r\n          },\r\n          legend: {\r\n            top: '5%',\r\n            left: 'center'\r\n          },\r\n          series: [\r\n            {\r\n              name: 'Access From',\r\n              type: 'pie',\r\n              radius: ['40%', '70%'],\r\n              avoidLabelOverlap: false,\r\n              itemStyle: {\r\n                borderRadius: 10,\r\n                borderColor: '#fff',\r\n                borderWidth: 2\r\n              },\r\n              label: {\r\n                show: false,\r\n                position: 'center'\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: true,\r\n                  fontSize: 20,\r\n                  fontWeight: 'bold'\r\n                }\r\n              },\r\n              labelLine: {\r\n                show: false\r\n              },\r\n              data: [\r\n                { value: result.crimeTypeStatistic[0], name: '强奸' },\r\n                { value: result.crimeTypeStatistic[1], name: '抢劫' },\r\n                { value: result.crimeTypeStatistic[2], name: '故意伤害' },\r\n                { value: result.crimeTypeStatistic[3], name: '盗窃' },\r\n                { value: result.crimeTypeStatistic[4], name: '诈骗' },\r\n                { value: result.crimeTypeStatistic[5], name: '谋杀' }\r\n              ]\r\n            }\r\n          ]\r\n        };\r\n        option && pieChart.setOption(option);\r\n      });\r\n    },\r\n    \r\n    /*drawTimeLineChart() {\r\n      this.distictResults.forEach(result => {\r\n      var result = {}; // 保存结果的对象\r\n      for (const [year, yearData] of Object.entries(result.DistrictCrimeTimeStatistic)) {\r\n        let sum = 0;\r\n        for (const value of Object.values(yearData)) {\r\n          sum += value;\r\n        }\r\n        result[year] = sum;\r\n      }\r\n      result = Object.values(result); // result: [6, 6, 7, 4, 5, 4, 78]\r\n      \r\n      const chartId = 'timeLineChart_' + result.DistrictName;\r\n      const zheChart = echarts.init(document.getElementById(chartId));\r\n\r\n      const option = {\r\n        xAxis: {\r\n          type: 'category',\r\n          data: this.years\r\n        },\r\n        yAxis: {\r\n          type: 'value'\r\n        },\r\n        series: [\r\n          {\r\n            data: result,\r\n            type: 'line'\r\n          }\r\n        ]\r\n      };\r\n\r\n      option && zheChart.setOption(option);\r\n    });\r\n    },*/\r\n    drawTimeLineChart() {\r\n   this.distictResults.forEach(result => {\r\n    \r\n    console.log(\"1\");\r\n    const chartId = 'timeLineChart_' + result.DistrictName;\r\n    \r\n    console.log(\"2\");\r\n    const zheChart = echarts.init(document.getElementById(chartId));\r\n    console.log(result.districtCrimeTimeStatistic);\r\n    console.log(result);\r\n    console.log(\"3\");\r\n    const years = Object.keys(result.districtCrimeTimeStatistic);\r\n    \r\n    console.log(\"4\");\r\n    const data = Object.values(result.districtCrimeTimeStatistic);\r\n\r\n    console.log(\"5\");\r\n    const option = {\r\n      xAxis: {\r\n        type: 'category',\r\n        data: years\r\n      },\r\n      yAxis: {\r\n        type: 'value'\r\n      },\r\n      series: [\r\n        {\r\n          data: data,\r\n          type: 'line'\r\n        }\r\n      ]\r\n    };\r\n    \r\n    console.log(\"6\");\r\n    option && zheChart.setOption(option);\r\n   });\r\n  },\r\n\r\n\r\n   \r\n    async fetchDistrictInfo() {\r\n      try {\r\n        \r\n        const response = await axios.get(`http://localhost:7078/api/CityCrimeInfo?CityName=${encodeURIComponent(this.CityName)}`);\r\n        console.log(response.data);\r\n        this.distictResults = response.data;  \r\n        await new Promise((resolve) => setTimeout(resolve, 500));\r\n        this.drawTypePieChart();    \r\n        this.drawTimeLineChart();    \r\n        console.log(\"调用结束\");\r\n      } catch (error) {\r\n        console.log(\"fetchDistrictInfo出错！\"+error);\r\n      }\r\n    },\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.top-content{\r\n  margin-top: 15px;\r\n  display:block;\r\n}\r\n.bottom-content{\r\n  display:block;\r\n}\r\n.cds-select{\r\n  width:25%;\r\n  height: 35px;\r\n  display:inline-block;\r\n  margin-left:40px;\r\n  background-color: #f0e6cf;\r\n  border: #c0b7a2;\r\n}\r\n.cdsamount{\r\n  margin-top: 10px;\r\n  margin-left:40px\r\n}\r\n  .content {\r\n    min-width: 1000px;\r\n    min-height:800px;\r\n    position: relative;\r\n    box-shadow: 0px 0px 10px 2px rgba(123, 103, 75, 0.427);\r\n    background-color: rgba(255, 255, 255, 0.616); \r\n    margin-bottom: 30px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    margin: 16px;\r\n    padding: 16px;\r\n  \r\n    border-radius: 5px;\r\n    box-shadow: #9a9a9a 0px 0px 6px;\r\n    box-shadow: #777777 0px 0px 3px;\r\n    border-top: #0051ff 3px solid;\r\n    border-top: solid 3px transparent;\r\n  }\r\n\r\n\r\n  \r\n .sub-header {\r\n    overflow: hidden;\r\n    display: flex;\r\n    position: absolute;\r\n    top: 70px;\r\n    left: 199px;\r\n    width: calc(100% - 199px);\r\n    height: 7vh;\r\n    min-height: 40px;\r\n    align-items: center; /* 文字竖直方向居中对齐 */\r\n    background-color: #1f2cdf;\r\n    box-shadow: inset -500px 0px 200px 0px rgba(4, 0, 113, 0.856);\r\n    color: #ffffff;\r\n    font-size: 28px;\r\n  }\r\n  .sub-header::before {\r\n    --size: 0;\r\n    content: '';\r\n    position: absolute;\r\n    left: var(--x);\r\n    top: var(--y);\r\n    width: var(--size);\r\n    height: var(--size);\r\n    background: radial-gradient(circle closest-side, #5a65ff, transparent);\r\n    transform: translate(-50%, -50%);\r\n    transition: width .2s ease, height .2s ease;\r\n  }\r\n  .sub-header:hover::before {\r\n    --size: 400px;\r\n  }\r\n.main\r\n{\r\n  margin-top: 10vh;\r\n}\r\n  /* 导航条下方边框阴影*/\r\n  .main ::v-deep .el-tabs__nav-wrap {\r\n    background-color: #bca77690; \r\n    min-width:900px;\r\n    box-shadow: 0px 10px 10px 0px #e6dbc190 ;\r\n  }\r\n   .main ::v-deep .el-tabs__item.is-active{ \r\n      color:#0051ff !important;\r\n      font-size: 20px;\r\n   }\r\n   .main ::v-deep .el-tabs__item{ \r\n    margin-left:20px;  \r\n    color:#ffffff;\r\n    font-size: 20px;\r\n   }\r\n   /*下方条 */\r\n   .main ::v-deep .el-tabs__active-bar{\r\n          background-color: #0051ff !important;\r\n   }\r\n\r\n\r\n</style>"],"mappings":";;gEAEIA,mBAAA,CAAiD,aAA5C,oBAAsC;;EAK1CC,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAS;;EAIdA,KAAK,EAAC;AAAa;;EAIhBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAe;;EAMvBA,KAAK,EAAC;AAAQ;;EACdA,KAAK,EAAC;AAAa;gEACtBD,mBAAA,CAA4C;EAAxCE,KAA0B,EAA1B;IAAA;EAAA;AAA0B,GAAC,UAAQ;;;EAIpCD,KAAK,EAAC;AAAa;iEACtBD,mBAAA,CAA6C;EAAzCE,KAA0B,EAA1B;IAAA;EAAA;AAA0B,GAAC,WAAS;;;;;6DA7B7CC,YAAA,CAEWC,oBAAA;IAFAH,KAAK,EAAC,YAAY;IAAEI,WAAS,EAAEC,QAAA,CAAAC;;sBACzC,MAAiD,CAAjDC,UAAiD,C;;sCAGrDC,mBAAA,wBAA2B,EAE3BT,mBAAA,CAmCM,OAnCNU,UAmCM,GAlCJV,mBAAA,CAiCM,OAjCNW,UAiCM,G,gBAhCJX,mBAAA,CAAmE;IAA5DY,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAC,QAAQ,GAAAC,MAAA;IAAIC,WAAW,EAAC;iDAAxBH,KAAA,CAAAC,QAAQ,E,GACpCX,YAAA,CAAmEc,oBAAA;IAAxDL,IAAI,EAAC,SAAS;IAAEM,OAAK,EAAEZ,QAAA,CAAAa;;sBAAmB,MAAE,C,iBAAF,IAAE,E;;kCAEvDnB,mBAAA,CAyBG,MAzBHoB,UAyBG,I,kBAtBHC,mBAAA,CAqBKC,SAAA,QAAAC,WAAA,CArBgBV,KAAA,CAAAW,cAAc,EAAxBC,MAAM;yBAAjBJ,mBAAA,CAqBK;MArBiCK,GAAG,EAAED,MAAM,CAACE;QAChD3B,mBAAA,CAKM,OALN4B,UAKM,GAJJ5B,mBAAA,CAA0D,OAA1D6B,UAA0D,EAAAC,gBAAA,CAA5BL,MAAM,CAACM,YAAY,kBACjD/B,mBAAA,CAAqC,aAAhC,KAAG,GAAA8B,gBAAA,CAAGL,MAAM,CAACO,UAAU,kBAC5BhC,mBAAA,CAAoC,aAA/B,MAAI,GAAA8B,gBAAA,CAAGL,MAAM,CAACQ,QAAQ,kBAC3BjC,mBAAA,CAAsC,aAAjC,MAAI,GAAA8B,gBAAA,CAAGxB,QAAA,CAAA4B,SAAS,CAACT,MAAM,kB,GAG9BzB,mBAAA,CAWM,OAXNmC,UAWM,GAVNnC,mBAAA,CAIM,OAJNoC,UAIM,GAHJC,UAA4C,EAC1C5B,mBAAA,gEAAmE,EACnET,mBAAA,CAA6F;MAAvFsC,EAAE,oBAAoBb,MAAM,CAACE,YAAY;MAAEzB,KAAqC,EAArC;QAAA;QAAA;MAAA;4CAErDF,mBAAA,CAIM,OAJNuC,WAIM,GAHJC,WAA6C,EAC3C/B,mBAAA,gEAAmE,EACnET,mBAAA,CAA8F;MAAxFsC,EAAE,qBAAqBb,MAAM,CAACE,YAAY;MAAEzB,KAAqC,EAArC;QAAA;QAAA;MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}